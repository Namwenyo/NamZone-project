{% extends 'marketplace/base.html' %}
{% block content %}
{% load widget_tweaks %}
{% load static %}


  <!-- List Item Form -->
  <section class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded-lg shadow">
    <h2 class="text-2xl font-semibold mb-4 text-gray-800">List Your Item</h2>

    <!-- Alert for Unauthenticated Users -->
    <div id="login-alert" class="hidden bg-red-100 text-red-700 p-3 rounded mb-4">
      You must be logged in to list an item.
      <a href="{% url 'marketplace:login' %}?next={% url 'marketplace:list' %}" class="underline text-blue-700">Login here</a>.
    </div>

    <form id="list-form" method="post" enctype="multipart/form-data" class="space-y-4">
      {% csrf_token %}
      {{ form.non_field_errors }}
      <div>
        {{ form.title.label_tag }}<br>
        {{ form.title|add_class:"w-full p-2 border rounded" }}
        {{ form.title.errors }}
      </div>
      <div>
        {{ form.price.label_tag }}<br>
        {{ form.price|add_class:"w-full p-2 border rounded" }}
        {{ form.price.errors }}
      </div>
      <div>
        {{ form.category.label_tag }}<br>
        {{ form.category|add_class:"w-full p-2 border rounded" }}
        {{ form.category.errors }}
      </div>
      <div>
        {{ form.description.label_tag }}<br>
        {{ form.description|add_class:"w-full p-2 border rounded h-32" }}
        {{ form.description.errors }}
      </div>
      <div>
        {{ form.image.label_tag }}<br>
        {{ form.image|add_class:"w-full p-2 border rounded" }}
        {{ form.image.errors }}
      </div>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit</button>
    </form>
  </section>
  
  <!-- <script>
    const isLoggedIn = document.body.getAttribute('data-is-authenticated') === 'true';
    const alertBox = document.getElementById("login-alert");
    const form = document.getElementById("list-form");

    if (!isLoggedIn) {
      alertBox.classList.remove("hidden");
      form.addEventListener("submit", function(e) {
        e.preventDefault();
        alertBox.scrollIntoView({ behavior: "smooth" });
      });
    }
  </script> -->

{% endblock %}